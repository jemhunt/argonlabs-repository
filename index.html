<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Argon's A.I. Labs - Master Workspace</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,400;0,6..12,600;0,6..12,700;1,6..12,400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* CORE STYLES - Unchanged from your template */
        :root {
            --argon-dark-blue: #002A42;
            --argon-green-accent: #A2AD00;
            --argon-text-color: #333;
            --argon-text-secondary: #5a6167;
            --argon-light-grey-bg: #f4f6f8;
            --argon-border-color: #dde2e7;
            --argon-sidebar-bg: #fff;
            --argon-app-bg: var(--argon-light-grey-bg);
            --argon-panel-bg: #fff;
            --argon-heading-color: var(--argon-dark-blue);
            --kpi-risk-bg: #fdf5e6;
            --kpi-risk-text: #b37400;
            --kpi-info-bg: #e6f7ff;
            --kpi-info-text: #006d9c;
            --animation-speed: 0.3s;
        }

        [data-theme="dark"] {
            --argon-dark-blue: #ffffff;
            --argon-text-color: #e2e2e2;
            --argon-text-secondary: #a0a0a0;
            --argon-border-color: #3a3f44;
            --argon-sidebar-bg: #1e2227;
            --argon-app-bg: #121212;
            --argon-panel-bg: #282c31;
            --argon-heading-color: #f0f0f0;
            --kpi-risk-bg: #4d3c21;
            --kpi-risk-text: #ffc107;
            --kpi-info-bg: #1c4257;
            --kpi-info-text: #87ceeb;
        }

        html, body {
            height: 100%; margin: 0; font-family: 'Nunito Sans', sans-serif;
            background-color: var(--argon-app-bg); color: var(--argon-text-color);
            line-height: 1.6; overflow: hidden; transition: background-color var(--animation-speed);
        }

        .app-layout { display: grid; grid-template-columns: 280px 1fr; height: 100vh; }

        /* --- SIDEBAR --- */
        .sidebar {
            background-color: var(--argon-sidebar-bg); border-right: 1px solid var(--argon-border-color);
            display: flex; flex-direction: column; padding: 25px; transition: all var(--animation-speed);
        }
        .sidebar-header { text-align: left; margin-bottom: 35px; }
        .sidebar-header img.logo {
            content: url('https://raw.githubusercontent.com/jemhunt/argonlabs-assets/db73dfbeb4135e26ca3a5b4b25dfdbb5e5b4264f/Rectangle%20Logo.svg');
            max-width: 90%; height: auto;
        }
        [data-theme="dark"] .sidebar-header img.logo {
            content: url('https://raw.githubusercontent.com/jemhunt/argonlabs-assets/ce7052fd825f101390fae207934f57c88984215b/Rectangle%20Logo%20-%20dark%20mode%20version.svg');
        }
        nav ul { list-style: none; padding: 0; margin: 0; }
        nav a {
            display: flex; align-items: center; padding: 12px 15px; text-decoration: none;
            color: var(--argon-text-secondary); border-radius: 6px; font-weight: 600;
            margin-bottom: 8px; transition: all 0.2s ease;
        }
        nav a:hover { background-color: var(--argon-app-bg); color: var(--argon-heading-color); }
        nav a.active { background-color: var(--argon-green-accent); color: var(--argon-dark-blue); font-weight: 700; }
        nav a.active svg { stroke: var(--argon-dark-blue); }
        nav svg { margin-right: 15px; stroke-width: 2px; width: 22px; height: 22px; transition: stroke 0.2s; }
        .sidebar-footer { margin-top: auto; }
        .theme-switch-wrapper { display: flex; align-items: center; justify-content: space-between; }
        .theme-switch { display: inline-block; height: 22px; position: relative; width: 42px; }
        .theme-switch input { display: none; }
        .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; border-radius: 22px; }
        .slider:before { background-color: #fff; bottom: 3px; content: ""; height: 16px; left: 4px; position: absolute; transition: .4s; width: 16px; border-radius: 50%; }
        input:checked + .slider { background-color: var(--argon-green-accent); }
        input:checked + .slider:before { transform: translateX(19px); }

        /* --- MAIN CONTENT --- */
        .main-content { padding: 30px 50px; overflow-y: auto; }
        
        .page-content {
            display: none; /* Hide all pages by default */
            animation: fadeIn 0.4s ease-in-out;
        }
        .page-content.active {
            display: block; /* Show only the active page */
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .page-header { margin-bottom: 30px; }
        .page-header h1 { color: var(--argon-heading-color); font-size: 2.5em; margin: 0; }
        .page-header p { color: var(--argon-text-secondary); font-size: 1.2em; margin: 5px 0 0; }
        
        /* Unchanged Panel, Button, etc. styles from your template */
        .panel { background-color: var(--argon-panel-bg); padding: 30px; margin-bottom: 25px; border-radius: 8px; border: 1px solid var(--argon-border-color); box-shadow: 0 4px 15px rgba(0,0,0,0.04); transition: all var(--animation-speed); }
        .panel h2 { display: flex; justify-content: space-between; align-items: center; color: var(--argon-heading-color); margin-top: 0; font-size: 1.6em; border-bottom: 1px solid var(--argon-border-color); padding-bottom: 15px; margin-bottom: 25px; }
        .panel h2 > div { display: flex; flex-direction: column; }
        .panel h2 small { color: var(--argon-text-secondary); font-size: 0.7em; font-weight: 400; }
        .workspace .panel { opacity: 0; transform: translateY(20px); transition: opacity var(--animation-speed) ease, transform var(--animation-speed) ease; }
        .workspace .panel.visible { opacity: 1; transform: translateY(0); }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--argon-heading-color); }
        select, input[type="text"], input[type="email"], input[type="number"], input[type="search"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid var(--argon-border-color); border-radius: 5px; background-color: var(--argon-app-bg); color: var(--argon-text-color); font-size: 1em; transition: border-color 0.2s; box-sizing: border-box; }
        select:focus, input:focus { outline: none; border-color: var(--argon-green-accent); }
        .file-drop-area { position: relative; border: 2px dashed var(--argon-border-color); border-radius: 8px; padding: 40px; text-align: center; transition: all var(--animation-speed); background-color: var(--argon-app-bg); }
        .file-drop-area.has-file { border-style: solid; border-color: var(--argon-green-accent); background-color: var(--argon-panel-bg); padding: 25px; }
        .file-drop-area input[type="file"] { position: absolute; left: 0; top: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
        #initial-prompt { text-align: center; }
        #initial-prompt svg { width: 48px; height: 48px; color: var(--argon-text-secondary); margin-bottom: 15px; }
        #initial-prompt p { font-size: 1.1em; margin: 0; }
        #file-preview { display: none; text-align: left; align-items: center; }
        #file-preview .file-icon { width: 40px; margin-right: 15px; color: var(--argon-green-accent); }
        #file-preview .file-details { flex-grow: 1; }
        #file-preview .file-name { font-weight: 700; color: var(--argon-heading-color); }
        #file-preview .file-size { font-size: 0.9em; color: var(--argon-text-secondary); }
        #removeFileBtn { background: none; border: none; cursor: pointer; color: var(--argon-text-secondary); padding: 5px; }
        #removeFileBtn:hover { color: var(--argon-error-color, #d9534f); }
        #removeFileBtn svg { width: 20px; height: 20px; }
        button { background-color: var(--argon-dark-blue); color: #fff; padding: 14px 30px; border: 1px solid var(--argon-dark-blue); border-radius: 5px; cursor: pointer; font-size: 1.1em; font-weight: 700; transition: all 0.2s ease; display: inline-flex; align-items: center; justify-content: center; margin-right: 10px; }
        html[data-theme="dark"] button { color: #000; }
        button:hover:not(:disabled) { background-color: var(--argon-green-accent); border-color: var(--argon-green-accent); color: var(--argon-dark-blue); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(162,173,0,0.3); }
        button:disabled { background-color: #ccc; border-color: #ccc; cursor: not-allowed; color: #666; }
        button svg { margin-right: 8px; }
        .button-secondary { background-color: transparent; color: var(--argon-text-color); border: 1px solid var(--argon-border-color); font-size: 1em; padding: 8px 20px; }
        html[data-theme="dark"] .button-secondary { color: var(--argon-text-secondary); }
        .button-secondary:hover:not(:disabled) { background-color: var(--argon-app-bg); border-color: var(--argon-border-color); color: var(--argon-text-color); transform: none; box-shadow: none; }
        .hidden { display: none !important; }
        #loadingIndicator { text-align: center; padding: 60px; margin-top: 30px; }
        .spinner { border: 4px solid var(--argon-border-color); border-top: 4px solid var(--argon-green-accent); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .kpi-card { background: var(--argon-panel-bg); padding: 20px; border-radius: 8px; border: 1px solid var(--argon-border-color); }
        .kpi-card.risk { background: var(--kpi-risk-bg); color: var(--kpi-risk-text); border-color: var(--kpi-risk-text); }
        .kpi-card.info { background: var(--kpi-info-bg); color: var(--kpi-info-text); border-color: var(--kpi-info-text); }
        .kpi-card .label { font-size: 0.9em; font-weight: 600; opacity: 0.8; }
        .kpi-card .value { font-size: 2.2em; font-weight: 700; line-height: 1.2; }
        .results-tabs { display: flex; border-bottom: 1px solid var(--argon-border-color); margin-bottom: 25px; }
        .tab-button { padding: 10px 20px; border: none; background: none; cursor: pointer; font-size: 1em; font-weight: 600; color: var(--argon-text-secondary); position: relative; }
        .tab-button.active { color: var(--argon-green-accent); }
        .tab-button.active::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 3px; background-color: var(--argon-green-accent); border-radius: 3px 3px 0 0; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .chart-container { position: relative; height: 380px; width: 100%; }
        .details-list { list-style: none; padding: 0; }
        .details-list li { padding: 15px; border-bottom: 1px solid var(--argon-border-color); display: flex; flex-direction: column; }
        .details-list li:last-child { border-bottom: none; }
        .details-list li small { color: var(--argon-text-secondary); font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
            <div>
                <div class="sidebar-header">
                    <img alt="Argon's A.I. Labs Logo" class="logo">
                </div>
                <nav id="main-nav">
                    <ul>
                        <li><a href="#" class="active" data-target="page-analysis-tool">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104l-1.28 1.28a1.5 1.5 0 00-2.12.055l-3.07 3.07a1.5 1.5 0 00-.055 2.12l1.28 1.28a1.5 1.5 0 002.12.055l3.07-3.07a1.5 1.5 0 00.055-2.12l-1.28-1.28zM9.75 3.104l6.132 6.132a1.5 1.5 0 01.055 2.12l-1.28 1.28a1.5 1.5 0 01-2.12.055l-3.07-3.07a1.5 1.5 0 01-.055-2.12l1.28-1.28a1.5 1.5 0 012.12-.055z" /><path stroke-linecap="round" stroke-linejoin="round" d="M18.375 9.25l-1.28 1.28a1.5 1.5 0 01-2.12.055l-3.07-3.07a1.5 1.5 0 01-.055-2.12l1.28-1.28a1.5 1.5 0 012.12-.055l3.07 3.07a1.5 1.5 0 01.055 2.12z" /></svg>
                            Analysis Tool
                        </a></li>
                        <li><a href="#" data-target="page-document-archive">
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" /></svg>
                           Document Archive
                        </a></li>
                        <!-- ++ NEWLY ADDED EXAMPLE PAGES ++ -->
                        <li><a href="#" data-target="page-fee-estimator">
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 15.75l-2.489-2.489m0 0a3.375 3.375 0 10-4.773-4.773 3.375 3.375 0 004.773 4.773zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                           Fee Estimator
                        </a></li>
                        <li><a href="#" data-target="page-compliance-generator">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            Compliance Generator
                         </a></li>
                         <li><a href="#" data-target="page-settings">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-1.007 1.11-1.226l.053-.022c.563-.23 1.18-.166 1.683.197l.052.052c.42.42.684 1.003.684 1.615c0 .612-.264 1.195-.684 1.615l-.052.052c-.504.363-1.12.427-1.683.197l-.053-.022c-.55-.219-1.02-.684-1.11-1.226zM12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" /></svg>
                            Team & Settings
                         </a></li>
                    </ul>
                </nav>
            </div>
            <div class="sidebar-footer">
                <div class="theme-switch-wrapper">
                    <label style="font-weight:600;">Dark Mode</label>
                    <label class="theme-switch" for="themeToggle">
                        <input type="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <!-- =================================================================== -->
            <!-- PAGE 1: A.I. Analysis Tool (Original Default Page)                -->
            <!-- =================================================================== -->
            <div id="page-analysis-tool" class="page-content active">
                <header class="page-header">
                    <h1>A.I. Document Analysis</h1>
                    <p>An intelligent workspace to review, analyze, and understand legal documents.</p>
                </header>
                <!-- WORKSPACE VIEW: Shown by default -->
                <div id="workspace" class="view-container">
                    <div id="uploadPanel" class="panel visible"><h2><div>Step 1: Upload a Document <small>Begin by selecting a file for analysis</small></div></h2><div class="file-drop-area" id="fileDropArea"><input type="file" id="documentFile" accept=".pdf,.doc,.docx,.txt"><div id="initial-prompt"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z" /></svg><p><strong>Drag & Drop Your File Here</strong></p><p style="font-size:0.9em; color: var(--argon-text-secondary);">or click to browse (PDF, DOCX, TXT)</p></div><div id="file-preview" style="display:flex;"><svg class="file-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg><div class="file-details"><div id="fileName" class="file-name"></div><div id="fileSize" class="file-size"></div></div><button id="removeFileBtn" title="Remove file"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg></button></div></div></div>
                    <div id="configPanel" class="panel"><h2><div>Step 2: Configure Analysis <small>Select an A.I. model tailored for your document type</small></div></h2><label for="analysisModel">Select Analysis Model</label><select id="analysisModel"><option value="contract_review_v1.2">Contract Review Model (v1.2)</option><option value="discovery_summary_v0.9">Discovery Summary Model (v0.9-beta)</option><option value="compliance_check_v2.0">Compliance Check Model (v2.0)</option></select></div>
                    <div id="actionPanel" class="panel"><button id="runAnalysisBtn" disabled><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L4.047 3.339 8 7.293l3.953-3.954L9.05.435ZM3.339 4.047 7.293 8 4.047 11.953 1.144 9.05c-.58-.58-.58-1.52 0-2.1l2.195-2.195Z"/><path d="M11.953 4.047 8 7.293l3.953 3.954 2.903-2.903c.58-.58.58-1.52 0-2.1L11.953 4.047Zm-3.954 8.242L8 8.001 4.047 11.954 7.001 15c.58.58 1.519.58 2.099 0l2.904-2.904Z"/></svg>Run Analysis</button></div>
                </div>
                <!-- LOADING VIEW -->
                <div id="loadingIndicator" class="view-container hidden"><div class="spinner"></div><p><strong>A.I. is thinking...</strong><br>Analyzing document structure and content. This may take a moment.</p></div>
                <!-- RESULTS VIEW -->
                <div id="resultsContainer" class="view-container hidden"><div class="panel"><h2><div>Analysis Dashboard <small id="resultsTitle"></small></div><button id="newAnalysisBtn" class="button-secondary">New Analysis</button></h2><div class="kpi-grid"><div class="kpi-card risk"><div class="label">Overall Risk Score</div><div id="kpi-risk" class="value"></div></div><div class="kpi-card info"><div class="label">Key Clauses Identified</div><div id="kpi-clauses" class="value"></div></div><div class="kpi-card info"><div class="label">Parties Mentioned</div><div id="kpi-parties" class="value"></div></div><div class="kpi-card info"><div class="label">Important Dates</div><div id="kpi-dates" class="value"></div></div></div><div class="results-tabs"><button class="tab-button active" data-tab="summary">Summary</button><button class="tab-button" data-tab="details">Details</button><button class="tab-button" data-tab="export">Export</button></div><div id="tab-summary" class="tab-content active"><div class="chart-container"><canvas id="analysisChart"></canvas></div></div><div id="tab-details" class="tab-content"><h3>Detailed Findings</h3><ul id="details-list" class="details-list"></ul></div><div id="tab-export" class="tab-content"><h3>Export Results</h3><p>Export the complete analysis as a PDF or CSV file for your records.</p><button>Export as PDF</button></div></div></div>
            </div>

            <!-- =================================================================== -->
            <!-- PAGE 2: Document Archive                                          -->
            <!-- =================================================================== -->
            <div id="page-document-archive" class="page-content">
                 <header class="page-header">
                    <h1>Document Archive</h1>
                    <p>Browse, search, and manage your previously analyzed documents.</p>
                </header>
                <div class="panel">
                    <h2><div>Archived Files<small>Showing all recent analyses</small></div>
                        <input type="search" placeholder="Search archive by filename or party..." style="width: 50%; padding: 10px; margin-top: 20px;">
                    </h2>
                    <ul class="details-list">
                        <li><strong>Will_and_Testament_Final.pdf</strong><small>Analyzed: 9 June 2025 | Model: Compliance Check v2.0 | Risk: Low</small></li>
                        <li><strong>Property_Lease_v3.docx</strong><small>Analyzed: 1 June 2025 | Model: Contract Review v1.2 | Risk: High</small></li>
                        <li><strong>Service_Agreement_Draft.docx</strong><small>Analyzed: 25 May 2025 | Model: Contract Review v1.2 | Risk: Medium</small></li>
                        <li><strong>Discovery_Bundle_04.pdf</strong><small>Analyzed: 22 May 2025 | Model: Discovery Summary v0.9-beta | Risk: N/A</small></li>
                    </ul>
                </div>
            </div>

            <!-- =================================================================== -->
            <!-- PAGE 3: Fee Estimator (NEW EXAMPLE)                               -->
            <!-- Demonstrates a form-based tool using standard components.         -->
            <!-- =================================================================== -->
            <div id="page-fee-estimator" class="page-content">
                <header class="page-header">
                   <h1>Fee Estimator</h1>
                   <p>Calculate estimated legal fees based on matter type and complexity.</p>
               </header>
               <div class="panel">
                   <h2><div>Configuration<small>Enter the parameters for the fee estimate</small></div></h2>
                   <label for="matterType">Matter Type</label>
                   <select id="matterType">
                       <option>Conveyancing (Standard)</option>
                       <option>Leasing (Commercial)</option>
                       <option>Litigation (Discovery Phase)</option>
                       <option>Wills & Estates</option>
                   </select>

                   <label for="complexity">Complexity Level</label>
                   <select id="complexity">
                       <option>Low</option>
                       <option>Medium</option>
                       <option>High</option>
                   </select>

                   <label for="hours">Estimated Hours</label>
                   <input type="number" id="hours" value="10" placeholder="e.g., 25">
                   
                   <button>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1-1H7.5a1 1 0 0 0-1 1H2zm9.5 0a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zM6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-1 3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm2 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"/></svg>
                    Calculate Fees</button>
                   <button class="button-secondary">Reset</button>
               </div>
               <div class="panel">
                    <h2><div>Estimated Cost<small>Based on the provided parameters</small></div></h2>
                    <div class="kpi-grid">
                        <div class="kpi-card info"><div class="label">Estimated Fee (ex. GST)</div><div class="value">$4,500</div></div>
                        <div class="kpi-card info"><div class="label">Disbursements</div><div class="value">$350</div></div>
                        <div class="kpi-card risk"><div class="label">Total Estimate (inc. GST)</div><div class="value">$5,335</div></div>
                    </div>
                    <p style="font-size: 0.9em; color: var(--argon-text-secondary);">Disclaimer: This is an estimate only and is not a binding quote. Actual fees may vary based on unforeseen complexities.</p>
               </div>
           </div>

            <!-- =================================================================== -->
            <!-- PAGE 4: Compliance Generator (NEW EXAMPLE)                        -->
            <!-- Demonstrates a checklist-style tool with generated output.        -->
            <!-- =================================================================== -->
            <div id="page-compliance-generator" class="page-content">
                <header class="page-header">
                    <h1>Compliance Checklist Generator</h1>
                    <p>Create a tailored compliance checklist for your legal matter.</p>
                </header>
                <div class="panel">
                    <h2><div>Select Compliance Areas<small>Choose the relevant legal frameworks</small></div></h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <label><input type="checkbox" checked> Australian Consumer Law</label>
                        <label><input type="checkbox" checked> Privacy Act 1988 (Cth)</label>
                        <label><input type="checkbox"> Corporations Act 2001 (Cth)</label>
                        <label><input type="checkbox"> National Credit Code</label>
                        <label><input type="checkbox"> GDPR (for EU clients)</label>
                        <label><input type="checkbox"> Modern Slavery Act</label>
                    </div>
                     <button>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" /></svg>
                        Generate Checklist
                    </button>
                </div>
                <div class="panel">
                    <h2><div>Generated Checklist<small>For 'Australian Consumer Law' and 'Privacy Act 1988'</small></div></h2>
                    <ul class="details-list">
                        <li><strong>Unfair Contract Terms</strong><small>Review all standard form contracts for terms that may be deemed unfair under the ACL.</small></li>
                        <li><strong>Misleading or Deceptive Conduct</strong><small>Ensure all marketing materials and representations are accurate and not likely to mislead.</small></li>
                        <li><strong>Consumer Guarantees</strong><small>Verify that processes for refunds, repairs, and replacements comply with statutory guarantees.</small></li>
                        <li><strong>Privacy Policy</strong><small>Confirm a compliant privacy policy is publicly available and easily accessible.</small></li>
                        <li><strong>Data Collection</strong><small>Ensure consent is obtained for the collection of personal information and that collection is limited to what is necessary.</small></li>
                    </ul>
                </div>
            </div>

            <!-- =================================================================== -->
            <!-- PAGE 5: Team & Settings (NEW EXAMPLE)                             -->
            <!-- Demonstrates an administrative page with multiple panels.         -->
            <!-- =================================================================== -->
            <div id="page-settings" class="page-content">
                <header class="page-header">
                    <h1>Team & Settings</h1>
                    <p>Manage your user profile, team members, and notification preferences.</p>
                </header>
                <div class="panel">
                    <h2><div>User Profile<small>Your personal information</small></div></h2>
                    <label for="userName">Full Name</label>
                    <input type="text" id="userName" value="Jane Doe">
                    <label for="userEmail">Email Address</label>
                    <input type="email" id="userEmail" value="jane.doe@argonlaw.com.au">
                </div>
                <div class="panel">
                    <h2><div>Notification Preferences<small>How we should contact you</small></div></h2>
                     <div class="theme-switch-wrapper" style="margin-bottom: 20px;">
                        <label style="font-weight:600;">Email summary after analysis</label>
                        <label class="theme-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="theme-switch-wrapper">
                        <label style="font-weight:600;">Notify on high-risk findings</label>
                        <label class="theme-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <button>Save Changes</button>
            </div>

        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // ===============================================================
        // MASTER NAVIGATION LOGIC
        // This script handles switching between all pages. It requires no
        // changes to support new pages added via the HTML structure.
        // ===============================================================
        const navLinks = document.querySelectorAll('#main-nav a');
        const pageContents = document.querySelectorAll('.main-content .page-content');

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault(); // Stop the link from trying to navigate away

                const targetId = link.getAttribute('data-target');
                const targetPage = document.getElementById(targetId);

                // 1. Update active state on sidebar links
                navLinks.forEach(navLink => navLink.classList.remove('active'));
                link.classList.add('active');

                // 2. Hide all pages and show the target page
                pageContents.forEach(page => page.classList.remove('active'));
                if (targetPage) {
                    targetPage.classList.add('active');
                }
            });
        });

        // ===============================================================
        // THEME TOGGLE LOGIC (Global)
        // ===============================================================
        const themeToggle = document.getElementById('themeToggle');
        const savedTheme = localStorage.getItem('argon-theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        themeToggle.checked = (savedTheme === 'dark');
        themeToggle.addEventListener('change', () => {
            const theme = themeToggle.checked ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('argon-theme', theme);
            // Re-render the chart on theme change if it exists
            if (analysisChart && window.lastChartData) {
                renderChart(window.lastChartData); 
            }
        });

        // ===============================================================
        // PAGE-SPECIFIC SCRIPT: A.I. ANALYSIS TOOL
        // This script only affects elements within #page-analysis-tool.
        // Null-checks are used to prevent errors when other pages are active.
        // ===============================================================
        const fileInput = document.getElementById('documentFile');
        const fileDropArea = document.getElementById('fileDropArea');
        const initialPrompt = document.getElementById('initial-prompt');
        const filePreview = document.getElementById('file-preview');
        const fileNameEl = document.getElementById('fileName');
        const fileSizeEl = document.getElementById('fileSize');
        const removeFileBtn = document.getElementById('removeFileBtn');
        const runAnalysisBtn = document.getElementById('runAnalysisBtn');
        const uploadPanel = document.getElementById('uploadPanel');
        const configPanel = document.getElementById('configPanel');
        const actionPanel = document.getElementById('actionPanel');
        const tabs = document.querySelectorAll('#page-analysis-tool .tab-button');
        const tabContents = document.querySelectorAll('#page-analysis-tool .tab-content');
        const workspace = document.getElementById('workspace');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const resultsContainer = document.getElementById('resultsContainer');
        const newAnalysisBtn = document.getElementById('newAnalysisBtn');
        
        let analysisChart = null;
        let isFileUploaded = false;

        function setUIState(state) {
            // Ensure these containers exist before trying to modify them
            if (!workspace || !loadingIndicator || !resultsContainer) return;

            workspace.classList.add('hidden');
            loadingIndicator.classList.add('hidden');
            resultsContainer.classList.add('hidden');

            if (state === 'initial') {
                workspace.classList.remove('hidden');
                workspace.style.animation = 'fadeIn 0.5s ease-out';
                fileDropArea.classList.remove('has-file');
                initialPrompt.style.display = 'block';
                filePreview.style.display = 'none';
                fileInput.value = '';
                isFileUploaded = false;
                configPanel.classList.remove('visible');
                actionPanel.classList.remove('visible');
                runAnalysisBtn.disabled = true;
            } else if (state === 'file-uploaded') {
                workspace.classList.remove('hidden');
                configPanel.classList.add('visible');
                actionPanel.classList.add('visible');
                runAnalysisBtn.disabled = false;
                isFileUploaded = true;
            } else if (state === 'loading') {
                loadingIndicator.classList.remove('hidden');
            } else if (state === 'results') {
                resultsContainer.classList.remove('hidden');
                resultsContainer.style.animation = 'fadeIn 0.5s ease-out';
            }
        }
        
        // Null-check elements that only exist on the analysis page
        if (fileInput) {
            fileInput.addEventListener('change', handleFileSelect);
            removeFileBtn.addEventListener('click', () => setUIState('initial'));
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                fileDropArea.addEventListener(eventName, e => { e.preventDefault(); e.stopPropagation(); }, false);
            });
            fileDropArea.addEventListener('drop', e => {
                fileInput.files = e.dataTransfer.files;
                handleFileSelect();
            });
        
            function handleFileSelect() {
                if (fileInput.files.length > 0) {
                    const file = fileInput.files[0];
                    fileNameEl.textContent = file.name;
                    fileSizeEl.textContent = `${(file.size / 1024).toFixed(1)} KB`;
                    fileDropArea.classList.add('has-file');
                    initialPrompt.style.display = 'none';
                    filePreview.style.display = 'flex';
                    setUIState('file-uploaded');
                }
            }

            runAnalysisBtn.addEventListener('click', () => {
                if (!isFileUploaded) return;
                setUIState('loading');
                setTimeout(() => {
                    const analysisData = generateDummyData();
                    renderResults(analysisData);
                    setUIState('results');
                }, 2500);
            });

            newAnalysisBtn.addEventListener('click', () => setUIState('initial'));
        }
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                tabContents.forEach(content => content.classList.remove('active'));
                const activeTabContent = document.getElementById(`tab-${tab.dataset.tab}`);
                if(activeTabContent) activeTabContent.classList.add('active');
            });
        });
        
        window.lastChartData = null; 

        function renderResults(data) {
            document.getElementById('resultsTitle').textContent = `For: ${fileInput.files[0].name}`;
            document.getElementById('kpi-risk').textContent = data.kpi.riskScore;
            document.getElementById('kpi-clauses').textContent = data.kpi.clauses;
            document.getElementById('kpi-parties').textContent = data.kpi.parties;
            document.getElementById('kpi-dates').textContent = data.kpi.dates;
            document.getElementById('details-list').innerHTML = data.details.map(item => `<li><strong>${item.type}:</strong> ${item.content}</li>`).join('');
            window.lastChartData = data.chart;
            renderChart(data.chart);
        }

        function renderChart(data) {
            const chartCanvas = document.getElementById('analysisChart');
            if(!chartCanvas) return; // Don't try to render if canvas isn't on the page
            const ctx = chartCanvas.getContext('2d');

            if (analysisChart) analysisChart.destroy();
            const style = getComputedStyle(document.body);
            const headingColor = style.getPropertyValue('--argon-heading-color');
            const labelColor = style.getPropertyValue('--argon-text-secondary');

            analysisChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: data.labels,
                    datasets: [{ data: data.values, backgroundColor: ['#A2AD00', '#002A42', '#5a6167', '#dde2e7'], borderColor: style.getPropertyValue('--argon-panel-bg'), borderWidth: 4, }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, cutout: '70%',
                    plugins: { legend: { position: 'right', labels: { color: labelColor, font: { weight: '600' } } }, title: { display: true, text: 'Document Content Breakdown', color: headingColor, font: { size: 18, weight: '700' } } }
                }
            });
        }
        
        function generateDummyData() {
            return {
                kpi: { riskScore: ['Low', 'Medium', 'High'][Math.floor(Math.random()*3)], clauses: Math.floor(Math.random() * 15) + 5, parties: Math.floor(Math.random() * 4) + 2, dates: Math.floor(Math.random() * 8) + 1, },
                chart: { labels: ['Standard Clauses', 'Financial Terms', 'Liability/Indemnity', 'General Boilerplate'], values: [Math.floor(Math.random() * 50) + 20, Math.floor(Math.random() * 30), Math.floor(Math.random() * 20), Math.floor(Math.random() * 40)] },
                details: [
                    {type: 'Risk Identified', content: 'Clause 8.2 (Indemnification) appears one-sided and may expose the client to undue liability.'},
                    {type: 'Key Date', content: 'Lease Commencement: 1 August 2025.'},
                    {type: 'Party Identified', content: 'Landlord: Acme Holdings Pty Ltd (ACN 123 456 789)'},
                    {type: 'Ambiguity', content: 'Definition of "Confidential Information" is broad and could be interpreted in multiple ways.'}
                ]
            };
        }
        // Initial state for the default page
        if(document.getElementById('page-analysis-tool').classList.contains('active')){
           setUIState('initial');
        }
    });
    </script>
</body>
</html>